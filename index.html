<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>History of Deportation in the United States - Interactive Timeline</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;0,700;1,400&family=Spectral:wght@300;400;600&display=swap" rel="stylesheet">
    
    <style>
        /* SAFE CSS: Preserves browser accessibility defaults */
        .deportation-timeline-container {
            font-family: 'Spectral', Georgia, serif;
            background: linear-gradient(to bottom right, #f5f5f4, #fef3c7, #f5f5f4);
            min-height: 100vh;
            line-height: 1.6;
            color: #1c1917;
            scroll-behavior: smooth;
        }
        
        .deportation-timeline-container *,
        .deportation-timeline-container *::before,
        .deportation-timeline-container *::after {
            box-sizing: border-box;
        }
        
        /* CRITICAL: Accessible focus states for keyboard navigation */
        .deportation-timeline-container button:focus,
        .deportation-timeline-container textarea:focus,
        .deportation-timeline-container a:focus {
            outline: 3px solid #2563eb;
            outline-offset: 2px;
        }
        
        .deportation-timeline-container .toggle-btn:focus {
            outline: 3px solid #d97706;
            outline-offset: 2px;
        }
        
        .deportation-timeline-container h1,
        .deportation-timeline-container h2,
        .deportation-timeline-container h3 {
            font-family: 'Crimson Text', Georgia, serif;
        }
        
        .deportation-timeline-container .dt-container {
            max-width: 1024px;
            margin: 0 auto;
            padding: 3rem 1.5rem;
        }
        
        /* Header */
        .deportation-timeline-container header {
            margin-bottom: 3rem;
            padding-bottom: 2rem;
            border-bottom: 2px solid #92400e;
        }
        
        .deportation-timeline-container header h1 {
            font-size: 3rem;
            font-weight: 700;
            color: #1c1917;
            margin-bottom: 1rem;
            line-height: 1.2;
        }
        
        .deportation-timeline-container header .subtitle {
            font-size: 1.125rem;
            color: #44403c;
            margin-bottom: 1rem;
            line-height: 1.7;
        }
        
        .deportation-timeline-container .attribution {
            background: #dbeafe;
            border-left: 4px solid #1d4ed8;
            padding: 1rem;
            border-radius: 0 0.5rem 0.5rem 0;
        }
        
        .deportation-timeline-container .attribution p {
            font-size: 0.875rem;
            color: #1e3a8a;
            line-height: 1.6;
        }
        
        .deportation-timeline-container .attribution a {
            text-decoration: underline;
            color: #1e3a8a;
        }
        
        .deportation-timeline-container .attribution a:hover {
            color: #1d4ed8;
        }
        
        /* I Can Statement */
        .deportation-timeline-container .i-can-statement {
            background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            animation: dt-scaleIn 0.5s ease-out;
        }
        
        .deportation-timeline-container .i-can-content h3 {
            font-size: 1rem;
            font-weight: 700;
            color: #e0e7ff;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        .deportation-timeline-container .i-can-content p {
            font-size: 1.125rem;
            line-height: 1.7;
            color: white;
            font-weight: 400;
        }
        
        /* ACCESSIBILITY FIX: Improved contrast for strong text */
        .deportation-timeline-container .i-can-content strong {
            font-weight: 700;
            color: #fffbeb; /* Lighter yellow for better contrast on purple */
            text-shadow: 0 1px 2px rgba(0,0,0,0.5);
        }
        
        /* QFT Instructions */
        .deportation-timeline-container .qft-opener {
            background: #f0f9ff;
            border: 3px solid #0369a1;
            border-radius: 0.75rem;
            padding: 2rem;
            margin-bottom: 2rem;
            animation: dt-scaleIn 0.5s ease-out;
        }
        
        .deportation-timeline-container .qft-opener h2 {
            font-size: 1.75rem;
            color: #0c4a6e;
            margin-bottom: 1rem;
        }
        
        .deportation-timeline-container .qft-opener > p {
            margin-bottom: 1.5rem;
            line-height: 1.7;
            color: #0c4a6e;
        }
        
        .deportation-timeline-container .qfocus-statement {
            background: white;
            border-left: 4px solid #0369a1;
            padding: 1.5rem;
            margin: 1.5rem 0;
            font-size: 1.125rem;
            font-weight: 600;
            color: #0c4a6e;
            line-height: 1.6;
        }
        
        .deportation-timeline-container .qft-steps {
            margin-top: 1.5rem;
        }
        
        .deportation-timeline-container .qft-step {
            background: white;
            padding: 1rem;
            margin-bottom: 1rem;
            border-radius: 0.5rem;
            border-left: 3px solid #38bdf8;
        }
        
        .deportation-timeline-container .qft-step h3 {
            font-size: 1.125rem;
            color: #0369a1;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }
        
        .deportation-timeline-container .qft-step ul {
            margin-left: 1.5rem;
            margin-top: 0.5rem;
            list-style-type: disc;
        }
        
        .deportation-timeline-container .qft-step li {
            color: #0c4a6e;
            margin-bottom: 0.25rem;
            line-height: 1.5;
        }

        /* Print Button */
        .deportation-timeline-container .print-actions {
            display: flex;
            justify-content: flex-end;
            margin-bottom: 1rem;
        }

        .deportation-timeline-container .print-btn {
            background: white;
            border: 2px solid #0c4a6e;
            color: #0c4a6e;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.2s;
        }

        .deportation-timeline-container .print-btn:hover {
            background: #f0f9ff;
            transform: translateY(-2px);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        /* Question Tracker */
        .deportation-timeline-container .question-tracker {
            background: #f0fdf4;
            border: 2px solid #16a34a;
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-bottom: 2rem;
            animation: dt-slideInUp 0.6s ease-out;
        }
        
        .deportation-timeline-container .question-tracker h3 {
            font-size: 1.25rem;
            color: #166534;
            margin-bottom: 1rem;
            font-weight: 700;
        }
        
        .deportation-timeline-container .question-item {
            margin-bottom: 1rem;
        }
        
        .deportation-timeline-container .question-item label {
            display: block;
            font-weight: 600;
            color: #166534;
            margin-bottom: 0.25rem;
            font-size: 0.875rem;
        }
        
        .deportation-timeline-container .question-item textarea,
        .deportation-timeline-container .notes-area textarea {
            width: 100%;
            min-height: 60px;
            padding: 0.5rem;
            border: 1px solid #86efac;
            border-radius: 0.25rem;
            font-family: 'Spectral', Georgia, serif;
            font-size: 0.875rem;
            line-height: 1.5;
            resize: vertical;
            color: #166534;
        }
        
        .deportation-timeline-container .question-item textarea:focus,
        .deportation-timeline-container .notes-area textarea:focus {
            outline: 2px solid #16a34a;
            outline-offset: 2px;
        }
        
        .deportation-timeline-container .notes-area {
            margin-top: 1.5rem;
        }
        
        .deportation-timeline-container .notes-area label {
            display: block;
            font-weight: 600;
            color: #166534;
            margin-bottom: 0.5rem;
            font-size: 0.875rem;
        }
        
        .deportation-timeline-container .notes-area textarea {
            min-height: 120px;
        }
        
        /* Timeline Instructions */
        .deportation-timeline-container .timeline-instructions {
            background: #fef3c7;
            border-left: 4px solid #d97706;
            padding: 1.5rem;
            margin-bottom: 2rem;
            border-radius: 0 0.5rem 0.5rem 0;
            animation: dt-slideInUp 0.5s ease-out;
        }
        
        .deportation-timeline-container .timeline-instructions h2 {
            font-size: 1.5rem;
            color: #92400e;
            margin-bottom: 1rem;
            font-weight: 700;
        }
        
        .deportation-timeline-container .timeline-instructions p {
            color: #78350f;
            margin-bottom: 0.75rem;
            line-height: 1.6;
        }
        
        .deportation-timeline-container .timeline-instructions ul {
            margin-left: 1.5rem;
            margin-top: 0.5rem;
            margin-bottom: 0.75rem;
            list-style-type: disc;
        }
        
        .deportation-timeline-container .timeline-instructions li {
            color: #78350f;
            margin-bottom: 0.5rem;
            line-height: 1.5;
        }
        
        .deportation-timeline-container .timeline-instructions strong {
            font-weight: 600;
            color: #92400e;
        }
        
        .deportation-timeline-container .timeline-instructions em {
            font-style: italic;
        }
        
        /* Filter Buttons */
        .deportation-timeline-container .filters {
            margin-bottom: 2rem;
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }
        
        .deportation-timeline-container .filter-btn {
            padding: 0.5rem 1rem;
            border-radius: 9999px;
            font-size: 0.875rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid #d6d3d1;
            background: white;
            color: #44403c;
            transform: scale(1);
        }
        
        .deportation-timeline-container .filter-btn:hover {
            background: #fef3c7;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }
        
        .deportation-timeline-container .filter-btn.active {
            background: #92400e;
            color: white;
            border-color: #92400e;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        
        .deportation-timeline-container .filter-btn:active {
            transform: translateY(0);
        }
        
        /* Section */
        .deportation-timeline-container .timeline-section {
            margin-bottom: 4rem;
        }
        
        .deportation-timeline-container .timeline-section.hidden {
            display: none;
        }
        
        .deportation-timeline-container .section-header {
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 2px solid #d97706;
            animation: dt-fadeIn 0.5s ease-out;
        }
        
        .deportation-timeline-container .section-header h2 {
            font-size: 2rem;
            font-weight: 700;
            color: #1c1917;
            margin-bottom: 0.5rem;
        }
        
        .deportation-timeline-container .section-period {
            font-size: 0.875rem;
            color: #92400e;
            font-weight: 600;
            margin-bottom: 0.75rem;
        }
        
        .deportation-timeline-container .section-note {
            color: #44403c;
            line-height: 1.7;
            font-style: italic;
            background: #fef3c7;
            padding: 1rem;
            border-radius: 0.5rem;
            border-left: 4px solid #d97706;
        }
        
        /* Timeline Entries */
        .deportation-timeline-container .entry {
            position: relative;
            padding-left: 2rem;
            padding-bottom: 2rem;
        }
        
        .deportation-timeline-container .entry::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 1px;
            background: linear-gradient(to bottom, #fde68a, #fbbf24, #fde68a);
        }
        
        .deportation-timeline-container .entry::after {
            content: '';
            position: absolute;
            left: -6px;
            top: 6px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #d97706;
            border: 2px solid #fffbeb;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }
        
        .deportation-timeline-container .entry:has(.entry-details.visible)::after {
            background: #f59e0b;
            box-shadow: 0 0 0 4px rgba(245, 158, 11, 0.2);
            transform: scale(1.3);
        }
        
        .deportation-timeline-container .entry-card {
            background: #fafaf9;
            border-radius: 0.5rem;
            padding: 1.25rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            transition: box-shadow 0.2s;
            position: relative;
            animation: dt-slideInLeft 0.4s ease-out;
        }
        
        .deportation-timeline-container .entry-card:hover {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        
        .deportation-timeline-container .entry-card:hover::before {
            content: '';
            position: absolute;
            top: 0;
            left: -6px;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #f59e0b;
            animation: dt-pulse 1.5s infinite;
            pointer-events: none;
        }
        
        .deportation-timeline-container .entry-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            gap: 1rem;
            margin-bottom: 0.75rem;
        }
        
        .deportation-timeline-container .entry-year {
            font-size: 0.875rem;
            font-weight: 700;
            color: #92400e;
            letter-spacing: 0.05em;
        }
        
        .deportation-timeline-container .toggle-btn {
            display: flex;
            align-items: center;
            gap: 0.375rem;
            font-size: 0.75rem;
            color: #57534e;
            background: none;
            border: none;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            font-weight: 600;
            transition: all 0.2s ease;
        }
        
        .deportation-timeline-container .toggle-btn:hover {
            color: #1c1917;
            transform: scale(1.05);
        }
        
        .deportation-timeline-container .toggle-icon {
            width: 1rem;
            height: 1rem;
        }
        
        .deportation-timeline-container .entry-event {
            color: #292524;
            line-height: 1.7;
            margin-bottom: 0.75rem;
        }
        
        .deportation-timeline-container .entry-details {
            display: none;
            animation: dt-fadeIn 0.3s ease-out;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }
        
        .deportation-timeline-container .entry-details.visible {
            display: block;
        }
        
        .deportation-timeline-container .annotation {
            background: #fef3c7;
            border-left: 3px solid #d97706;
            padding: 0.75rem;
            border-radius: 0 0.25rem 0.25rem 0;
            margin-bottom: 0.75rem;
            animation: dt-slideInUp 0.4s ease-out;
        }
        
        .deportation-timeline-container .annotation p {
            font-size: 0.875rem;
            color: #44403c;
            font-style: italic;
            line-height: 1.6;
        }
        
        .deportation-timeline-container .inquiry {
            background: #dbeafe;
            border-left: 3px solid #2563eb;
            padding: 0.75rem;
            border-radius: 0 0.25rem 0.25rem 0;
            margin-bottom: 0.75rem;
            animation: dt-slideInUp 0.4s ease-out;
        }
        
        .deportation-timeline-container .inquiry-label {
            font-size: 0.875rem;
            font-weight: 600;
            color: #1e3a8a;
            margin-bottom: 0.25rem;
        }
        
        .deportation-timeline-container .inquiry p {
            font-size: 0.875rem;
            color: #1e40af;
        }
        
        .deportation-timeline-container .sources {
            margin-top: 0.75rem;
            padding-top: 0.75rem;
            border-top: 1px solid #e7e5e4;
            animation: dt-slideInUp 0.4s ease-out;
        }
        
        .deportation-timeline-container .sources-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }
        
        .deportation-timeline-container .sources-icon {
            width: 1rem;
            height: 1rem;
            color: #92400e;
        }
        
        .deportation-timeline-container .sources-title {
            font-size: 0.75rem;
            font-weight: 600;
            color: #78350f;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        .deportation-timeline-container .source-list {
            display: flex;
            flex-direction: column;
            gap: 0.375rem;
        }
        
        .deportation-timeline-container .source-link {
            display: flex;
            align-items: start;
            gap: 0.5rem;
            font-size: 0.875rem;
            color: #1e3a8a;
            text-decoration: none;
            transition: all 0.2s ease;
        }
        
        .deportation-timeline-container .source-link:hover {
            color: #1d4ed8;
            transform: translateX(4px);
        }
        
        .deportation-timeline-container .source-link:hover .source-title {
            text-decoration-color: #2563eb;
        }
        
        .deportation-timeline-container .external-icon {
            width: 0.875rem;
            height: 0.875rem;
            margin-top: 0.125rem;
            flex-shrink: 0;
            opacity: 0.7;
        }
        
        .deportation-timeline-container .source-link:hover .external-icon {
            opacity: 1;
        }
        
        .deportation-timeline-container .source-title {
            flex: 1;
            text-decoration: underline;
            text-decoration-color: #bfdbfe;
        }
        
        .deportation-timeline-container .source-type {
            font-size: 0.75rem;
            color: #78716c;
            margin-left: 0.5rem;
        }
        
        /* Reflection Section */
        .deportation-timeline-container .reflection-section {
            background: #faf5ff;
            border: 2px solid #9333ea;
            border-radius: 0.75rem;
            padding: 2rem;
            margin-top: 3rem;
        }
        
        .deportation-timeline-container .reflection-section h2 {
            font-size: 1.75rem;
            color: #6b21a8;
            margin-bottom: 1.5rem;
            font-weight: 700;
        }
        
        .deportation-timeline-container .reflection-prompts {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .deportation-timeline-container .prompt {
            background: white;
            padding: 1rem;
            border-radius: 0.5rem;
            border-left: 3px solid #c084fc;
            line-height: 1.6;
            color: #581c87;
        }
        
        .deportation-timeline-container .prompt strong {
            font-weight: 600;
            color: #6b21a8;
        }
        
        .deportation-timeline-container .prompt em {
            font-style: italic;
        }
        
        /* Footer */
        .deportation-timeline-container footer {
            margin-top: 4rem;
            padding-top: 2rem;
            border-top: 1px solid #d6d3d1;
        }
        
        .deportation-timeline-container footer p {
            font-size: 0.875rem;
            color: #57534e;
            line-height: 1.6;
        }
        
        .deportation-timeline-container footer p:last-child {
            font-size: 0.75rem;
            color: #78716c;
            margin-top: 1rem;
        }
        
        .deportation-timeline-container footer a {
            color: #78716c;
            text-decoration: underline;
        }
        
        .deportation-timeline-container footer strong {
            font-weight: 600;
        }
        
        /* Animations */
        @keyframes dt-fadeIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes dt-slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        @keyframes dt-slideInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes dt-scaleIn {
            from {
                opacity: 0;
                transform: scale(0.95);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        @keyframes dt-pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
        }
        
        /* Responsive */
        @media (max-width: 640px) {
            .deportation-timeline-container .dt-container {
                padding: 2rem 1rem;
            }
            
            .deportation-timeline-container header h1 {
                font-size: 2rem;
            }
            
            .deportation-timeline-container .section-header h2 {
                font-size: 1.5rem;
            }
            
            .deportation-timeline-container .qft-opener h2 {
                font-size: 1.5rem;
            }
            
            .deportation-timeline-container .i-can-statement {
                padding: 1.25rem;
            }
            
            .deportation-timeline-container .i-can-content p {
                font-size: 1rem;
            }
            
            .deportation-timeline-container .qfocus-statement {
                font-size: 1rem;
            }
            
            .deportation-timeline-container .entry {
                padding-left: 1.5rem;
            }
        }
        
        /* Print Friendly Styles */
        @media print {
            .deportation-timeline-container .dt-container {
                max-width: 100%;
                padding: 0;
                margin: 0;
            }
            
            /* Hide interactive elements */
            .deportation-timeline-container .filters,
            .deportation-timeline-container .toggle-btn,
            .deportation-timeline-container footer,
            .deportation-timeline-container .print-actions,
            .deportation-timeline-container .qft-steps {
                display: none !important;
            }

            /* Expand all details */
            .deportation-timeline-container .entry-details {
                display: block !important;
                max-height: none !important;
                border-top: 1px solid #eee;
                margin-top: 0.5rem;
                padding-top: 0.5rem;
            }

            /* Simplify cards */
            .deportation-timeline-container .entry-card {
                break-inside: avoid;
                box-shadow: none;
                border: 1px solid #ddd;
                margin-bottom: 1rem;
                padding: 1rem;
            }

            .deportation-timeline-container .entry {
                padding-left: 0;
                padding-bottom: 1rem;
            }
            
            .deportation-timeline-container .entry::before,
            .deportation-timeline-container .entry::after {
                display: none;
            }

            /* Better text areas */
            .deportation-timeline-container .question-tracker textarea,
            .deportation-timeline-container .notes-area textarea {
                border: 1px solid #999;
                resize: none;
                height: auto;
                min-height: 100px;
                color: black;
                font-family: serif;
            }
            
            /* Page break controls */
            .deportation-timeline-container .qft-opener,
            .deportation-timeline-container .question-tracker,
            .deportation-timeline-container .timeline-section h2 {
                page-break-before: always;
            }
            
            .deportation-timeline-container .question-item {
                page-break-inside: avoid;
            }
        }
    </style>
</head>
<body>
    <div class="deportation-timeline-container">
        <div class="dt-container">
        <header>
            <h1>History of Deportation in the United States</h1>
            <p class="subtitle">
                An inquiry-based exploration of US immigration enforcement and deportation policy from the colonial era to the present
            </p>
            <div class="attribution">
                <p>
                    <strong>Adapted from:</strong> "History of Deportation," American Historical Association Congressional Briefing (March 2025), featuring historians Hidetaka Hirota (UC Berkeley), Ana Raquel Minian (Stanford), and Yael Schacher (Refugees International).
                    <a href="https://www.historians.org/resource/history-of-deportation/" target="_blank" rel="noopener noreferrer">View original resource →</a>
                </p>
            </div>
        </header>

        <div class="i-can-statement">
            <div class="i-can-content">
                <h3>Learning Goal</h3>
                <p><strong>I can</strong> explain how U.S. immigration policy both limits and allows immigration through things like border enforcement, visas, and refugee programs, and use these facts to support my own opinion about what should change.</p>
            </div>
        </div>

        <div class="qft-opener">
            <h2>Part 1: Generate Your Questions</h2>
            
            <p>
                U.S. immigration policy is a system with two sides: it creates pathways for people to enter legally (like visas, refugee programs, and citizenship) while also enforcing limits through deportation, border control, and exclusion. To understand this system, you'll start by generating your own questions about one aspect of this history.
            </p>
            
            <div class="qfocus-statement">
                <strong>Question Focus:</strong><br>
                "In 2025, interior deportations more than quadrupled to their highest level in decades. ICE detention reached a record 73,000 people—84% higher than the previous year."
            </div>
            
            <div class="qft-steps">
                <div class="qft-step">
                    <h3>Step 1: Produce Questions</h3>
                    <p>In your small group (3-4 students), follow these rules:</p>
                    <ul>
                        <li>Ask as many questions as you can about the Question Focus</li>
                        <li>Do not stop to discuss, judge, or answer any question</li>
                        <li>Write down every question exactly as it is stated</li>
                    </ul>
                </div>
                
                <div class="qft-step">
                    <h3>Step 2: Improve Your Questions</h3>
                    <p><em>Discuss these steps verbally with your group:</em></p>
                    <ul>
                        <li>Change any statements into questions</li>
                        <li>Mark each question as closed-ended (C) or open-ended (O). What are the advantages and disadvantages of each type?</li>
                        <li>Practice changing questions from one type to another</li>
                        <li>Select at least 2 questions to revise and improve</li>
                    </ul>
                </div>
                
                <div class="qft-step">
                    <h3>Step 3: Prioritize</h3>
                    <ul>
                        <li>Review all your questions</li>
                        <li>Select your top 3 questions. These are the questions your group most wants to explore.</li>
                        <li>Be prepared to explain why these questions matter</li>
                        <li>Record your priority questions in the tracker below.</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="print-actions">
            <span id="saveStatus" class="save-status" style="font-size: 0.875rem; color: #16a34a; font-style: italic; margin-right: 1rem;" aria-live="polite"></span>
            <button class="print-btn" onclick="window.print()">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M6 9V2h12v7"></path>
                    <path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path>
                    <path d="M6 14h12v8H6z"></path>
                </svg>
                Print / Save My Work
            </button>
        </div>

        <div class="question-tracker">
            <h3>Our Group's Priority Questions</h3>
            <div class="question-list">
                <div class="question-item">
                    <label>Priority Question #1:</label>
                    <textarea placeholder="Type your group's first priority question here..."></textarea>
                </div>
                <div class="question-item">
                    <label>Priority Question #2:</label>
                    <textarea placeholder="Type your group's second priority question here..."></textarea>
                </div>
                <div class="question-item">
                    <label>Priority Question #3:</label>
                    <textarea placeholder="Type your group's third priority question here..."></textarea>
                </div>
            </div>
            <div class="notes-area">
                <label>Notes & Evidence from the Timeline:</label>
                <textarea placeholder="As you explore the timeline, record important findings, surprising information, and evidence related to your questions."></textarea>
            </div>
        </div>

        <div class="timeline-instructions">
            <h2>Part 2: Investigate Using the Timeline</h2>
            <p>Use this interactive timeline to find evidence that helps you answer your top 3 questions. As you explore, pay attention to how different policies both <em>limited</em> immigration (through exclusion, deportation, and enforcement) and <em>allowed</em> immigration (through legal pathways, programs, and protections).</p>
            <p><strong>How To Do It</strong></p>
            <ul>
                <li>Click "View Context" on timeline entries related to your questions</li>
                <li>Follow primary source links to examine original documents</li>
                <li>Take notes in the tracker above on evidence that addresses your questions</li>
                <li>Notice patterns! Which groups were targeted for exclusion? When did the U.S. create pathways for legal entry?</li>
                <li>Generate new questions as you discover surprising information</li>
            </ul>
        </div>

        <div class="filters">
            <button class="filter-btn active" data-section="all">All Periods</button>
            <button class="filter-btn" data-section="foundations">Foundations (pre-1930)</button>
            <button class="filter-btn" data-section="midcentury">Mid-Century (1930s-80s)</button>
            <button class="filter-btn" data-section="modern">Modern Era (1980-present)</button>
        </div>

        <div id="timeline-content"></div>

        <div class="reflection-section">
            <h2>Part 3: Reflection</h2>
            <div class="reflection-prompts">
                <div class="prompt">
                    <strong>1. Which of your questions were you able to answer using the timeline? What specific evidence did you find? Which questions require more research?
                </div>
                <div class="prompt">
                    <strong>2.Identify at least two examples from the timeline where U.S. policy <em>limited</em> immigration and two examples where it <em>allowed</em> or created pathways for immigration. What patterns do you notice?
                </div>
                <div class="prompt">
                    <strong>3. Find one example where an immigration policy had effects that were different from what policymakers intended. What does this reveal about the complexity of immigration policy?
                </div>
                <div class="prompt">
                    <strong>4. Based on the historical evidence you've explored, what is one change you think should be made to current U.S. immigration policy? What historical facts support your position? What might critics of your position argue?
                </div>
                <div class="prompt">
                    <strong>5. What new questions emerged as you explored the timeline? If you were to research one question further, what primary sources would you need to consult?
                </div>
            </div>
        </div>
        </div>
    </div>

    <script>
        const timelineData = {
            foundations: {
                title: "The Foundations of US Deportation Policy",
                period: "Colonial Era – 1920s",
                thematicNote: "Until the 1870s, immigration was largely administered by state governments. Federal deportation policy developed alongside admission restrictions, with racism as a major driving force. Early policies targeted the poor, but by the early 20th century, diverse groups could be expelled on economic, medical, political, and moral grounds.",
                entries: [
                    {
                        id: 'f1',
                        year: '1639',
                        event: 'Colonial Massachusetts law authorized towns to remove poor people who had no legal settlement in the town.',
                        annotation: 'This represents one of the earliest forms of exclusion based on economic status in colonial America. The concept of "legal settlement" tied mobility rights to property and community membership.',
                        inquiryPrompt: 'Why did colonial communities link the right to stay in a place with property ownership?',
                        sources: []
                    },
                    {
                        id: 'f2',
                        year: '1683',
                        event: 'Colonial New York law authorized local officials to send transient beggars to "the country from whence they came."',
                        annotation: 'Early deportation laws focused on economic dependency rather than nationality. The phrase "country from whence they came" suggests removal could be international, not just between colonies.',
                        inquiryPrompt: 'How does this early focus on poverty shape our understanding of what deportation was originally meant to do?',
                        sources: []
                    },
                    {
                        id: 'f3',
                        year: '1794',
                        event: 'Massachusetts state law allowed for the expulsion of any pauper without legal settlement in the state to "any other State, or to any place beyond [the] sea where he belongs."',
                        annotation: 'Post-Revolutionary state laws continued colonial practices of removing the poor. Note the expanded scope to include deportation "beyond sea," foreshadowing federal-level international deportation.',
                        inquiryPrompt: 'What does the phrase "beyond the sea" tell us about who early Americans thought belonged in the country?',
                        sources: []
                    },
                    {
                        id: 'f4',
                        year: '1798',
                        event: 'The Alien Act authorized the president to arrest and deport foreign nationals whom he deemed dangerous to the peace and security of the United States.',
                        annotation: 'Part of the Alien and Sedition Acts, this law granted extraordinary executive power during tensions with France. It expired in 1800 and was never enforced, but established precedent for politically motivated deportation.',
                        inquiryPrompt: 'Why did this law expire after two years without ever being used? What does that suggest about American attitudes toward presidential power?',
                        sources: [
                            {
                                title: 'NARA Milestone Documents: Alien & Sedition Acts',
                                url: 'https://www.archives.gov/milestone-documents/alien-and-sedition-acts',
                                type: 'Primary Source & Transcript'
                            }
                        ]
                    },
                    {
                        id: 'f5',
                        year: '1850',
                        event: 'Massachusetts immigration officials were authorized to deport foreign paupers from the United States.',
                        annotation: 'This marks a shift: states claiming authority to deport internationally, not just to other states. Massachusetts maintained immigrant inspection stations and charged head taxes on arriving passengers.',
                        inquiryPrompt: 'What tensions would arise when state governments, rather than the federal government, controlled who could enter or leave the country?',
                        sources: [
                            {
                                title: 'Expelling the Poor: The Antebellum Origins of American Deportation Policy',
                                url: 'https://www.gilderlehrman.org/history-resources/essays/expelling-poor-antebellum-origins-american-deportation-policy',
                                type: 'Summary & Content'
                            }
                        ]
                    },
                    {
                        id: 'f6',
                        year: '1875',
                        event: 'The US Supreme Court declared state passenger laws in New York, Louisiana, and California unconstitutional.',
                        annotation: 'In Henderson v. Mayor of New York and related cases, the Court ruled that immigration regulation was exclusively a federal power. This decision cleared the way for federal immigration law.',
                        inquiryPrompt: 'Why would the Supreme Court decide that only the federal government, not states, can control immigration?',
                        sources: [
                            {
                                title: 'Henderson v. Mayor of New York (1875)',
                                url: 'https://supreme.justia.com/cases/federal/us/92/259/',
                                type: 'Supreme Court Case'
                            }
                        ]
                    },
                    {
                        id: 'f7',
                        year: '1882',
                        event: 'The Chinese Exclusion Act excluded Chinese laborers, with a provision for the deportation of Chinese who unlawfully entered the United States.',
                        annotation: 'The first federal law to exclude an entire ethnic group. Officially titled "An Act to Execute Certain Treaty Stipulations Relating to Chinese," it suspended immigration of Chinese laborers for 10 years and barred Chinese from naturalization.',
                        inquiryPrompt: 'Why was Chinese Exclusion the first law to target a specific ethnic group, rather than targeting based on poverty or politics?',
                        sources: [
                            {
                                title: 'NARA Milestone Documents: Chinese Exclusion Act',
                                url: 'https://www.archives.gov/milestone-documents/chinese-exclusion-act',
                                type: 'Primary Source & Transcript'
                            }
                        ]
                    },
                    {
                        id: 'f8',
                        year: '1882 (Aug)',
                        event: 'The Immigration Act excluded the poor, people with mental illness, and criminals.',
                        annotation: 'Passed just months after Chinese Exclusion, this law established federal inspection of immigrants and created the categories of "excludable" persons. It imposed a 50-cent head tax to fund immigration enforcement.',
                        inquiryPrompt: 'How did immigration officials decide who was "likely to become a public charge"? Who had the power to make that judgment?',
                        sources: [
                            {
                                title: 'Immigration Act of 1882',
                                url: 'https://immigrationhistory.org/item/1882-immigration-act/',
                                type: 'Primary Source'
                            }
                        ]
                    },
                    {
                        id: 'f9',
                        year: '1891',
                        event: 'The Immigration Act added people likely to become public charges, people with contagious diseases, polygamists, contract workers, and assisted immigrants to the excludable class. The act also provided for the deportation of foreign nationals found to have entered the United States unlawfully within a year after arrival.',
                        annotation: 'This law created the first federal immigration bureaucracy: the Office of the Superintendent of Immigration. The one-year deportation window was significant—it meant immigrants who had been in the US longer could not be deported.',
                        inquiryPrompt: 'Why would lawmakers create a time limit on deportation? What does this suggest about ideas of belonging and integration?',
                        sources: [
                            {
                                title: 'Immigration Act of 1891',
                                url: 'https://www.govinfo.gov/content/pkg/STATUTE-26/pdf/STATUTE-26-Pg1084.pdf',
                                type: 'Government Document'
                            }
                        ]
                    },
                    {
                        id: 'f10',
                        year: '1892',
                        event: 'The Geary Act required Chinese in the US to obtain a Certificate of Residence. Those who failed to do so would become deportable.',
                        annotation: 'Extended Chinese Exclusion for 10 more years and required all Chinese laborers to carry certificates of residence with photographs. Foreshadowed modern identification requirements and mass registration systems.',
                        inquiryPrompt: 'How did requiring Chinese immigrants to carry photo IDs create a different class of citizenship or belonging?',
                        sources: [
                            {
                                title: 'Geary Act of 1892',
                                url: 'https://immigrationhistory.org/item/geary-act/',
                                type: 'Primary Source'
                            }
                        ]
                    },
                    {
                        id: 'f11',
                        year: '1924',
                        event: 'The Immigration Act introduced the national origins quota system, starting quantitative immigration restriction. It also introduced a consular control system and suspended virtually all Asian immigration.',
                        annotation: 'The Johnson-Reed Act created quotas favoring Northern and Western Europeans while virtually eliminating immigration from Asia, Southern Europe, and Eastern Europe. Required visa applications abroad, shifting control to US consuls.',
                        inquiryPrompt: 'What does it mean that this law gave more visas to people from Britain and Germany than to people from Italy or Poland? What values does that reflect?',
                        sources: [
                            {
                                title: 'US House of Reps: The Immigration Act of 1924',
                                url: 'https://history.house.gov/Historical-Highlights/1901-1950/The-Immigration-Act-of-1924/',
                                type: 'Summary & Context'
                            }
                        ]
                    }
                ]
            },
            midcentury: {
                title: "Deportation in the 1930s–80s",
                period: "1930s–1980s",
                thematicNote: "Deportations during this period affected both migrants and American citizens, often violating rights of legal residents and citizens. They tore families apart, separating citizen children from parents. Presented as measures to protect jobs and public safety, deportations generally failed to improve economic stability or security—sometimes worsening conditions by strengthening criminal organizations. US immigration laws and policies shaped unauthorized migration, with enforcement efforts often having unintended consequences.",
                entries: [
                    {
                        id: 'm1',
                        year: '1930s (Great Depression)',
                        event: 'One of the most extensive mass expulsion campaigns in US history, on the premise that Mexican migrants and US-born Mexican Americans were responsible for significant aspects of the nation\'s economic miseries. By the late 1930s, 2 million people had been expelled to Mexico; estimates suggest up to 60% were US citizens.',
                        annotation: 'Called "Mexican Repatriation," this campaign involved both formal deportations and coerced "voluntary" departures. Local governments, welfare agencies, and employers pressured Mexican families to leave, often with false promises of assistance.',
                        inquiryPrompt: 'How could up to 60% of people deported be U.S. citizens? What does this reveal about how citizenship was—or wasn\'t—protected?',
                        sources: [
                            {
                                title: 'USCIS History: INS Records for 1930s Repatriations',
                                url: 'https://www.uscis.gov/about-us/our-history/stories-from-the-archives/ins-records-for-1930s-mexican-repatriations',
                                type: 'Government History'
                            }
                        ]
                    },
                    {
                        id: 'm2',
                        year: '1942–64',
                        event: 'The Bracero Program, a guest worker program allowing temporary labor from Mexico, issued over 4.5 million contracts in 22 years. The program led to increased unsanctioned border crossings. More people wanted to join than there were available slots, leading to undocumented migration. Returning Braceros encouraged others to migrate.',
                        annotation: 'Public Law 78 formalized wartime agreements between US and Mexican governments. Braceros worked primarily in agriculture and railroads. The program created pathways and networks that shaped migration patterns for decades.',
                        inquiryPrompt: 'Why would a legal guest worker program actually increase illegal immigration? What does this suggest about how migration works?',
                        sources: [
                            {
                                title: 'Bracero History Archive: Oral Histories',
                                url: 'https://braceroarchive.org/items/browse?collection=1',
                                type: 'Digital Archive'
                            },
                            {
                                title: 'Public Law 78 (1951) Full Text',
                                url: 'https://www.govinfo.gov/content/pkg/STATUTE-65/pdf/STATUTE-65-Pg119.pdf',
                                type: 'Government Document'
                            }
                        ]
                    },
                    {
                        id: 'm3',
                        year: '1954',
                        event: 'The Immigration and Naturalization Service launched Operation Wetback, a paramilitary campaign to expel Mexican migrants. Over 1 million people were apprehended; many families were separated by deportation. Operation Wetback reduced unauthorized crossings; the government replaced those workers—because of employer demands—with legal guest workers through the Bracero Program.',
                        annotation: 'Gen. Joseph Swing led this military-style operation using buses, trains, and ships to move deportees deep into Mexico\'s interior. Many US citizens were wrongly deported. The operation\'s "success" relied on expanding the Bracero Program simultaneously.',
                        inquiryPrompt: 'If Operation Wetback reduced illegal immigration by expanding legal immigration, what does that tell us about why people migrate?',
                        sources: [
                            {
                                title: 'Understanding Operation Wetback: A Historical Overview of U.S. Immigration Policy (Texas State HIstorical Association)',
                                url: 'https://www.tshaonline.org/handbook/entries/operation-wetback',
                                type: 'Historical Association'
                            }
                        ]
                    },
                    {
                        id: 'm4',
                        year: '1964',
                        event: 'Congress ended the Bracero Program. Mexican workers accustomed to US employment continued migrating—now without authorization.',
                        annotation: 'Labor unions, religious groups, and civil rights activists pressured Congress to end the program due to exploitation and suppression of farmworker wages. The end of legal pathways didn\'t end labor demand, creating the conditions for large-scale unauthorized migration.',
                        inquiryPrompt: 'Why did ending a legal pathway for migration lead to more illegal immigration rather than less migration overall?',
                        sources: [
                            {
                                title: 'Evolution of the Mexico-U.S. Migration System: Insights from the Mexican Migration Project',
                                url: 'https://pmc.ncbi.nlm.nih.gov/articles/PMC9017686/',
                                type: 'Academic Article'
                            }
                        ]
                    },
                    {
                        id: 'm5',
                        year: '1965',
                        event: 'The Immigration and Nationality Act (also known as the Hart-Celler Act): Replaced the race- and nationality-based quota system that had been in place since 1924 with numerical quotas on migration from all countries, including on independent countries in the Americas for the first time. Created a preference system that focused on immigrants\' skills and family relations with citizens or US residents and exempted immediate relatives of US citizens from the quota.',
                        annotation: 'Signed by President Johnson at the Statue of Liberty, this law abolished the discriminatory national origins system. However, it imposed the first-ever numerical limits on Western Hemisphere immigration (120,000/year), which particularly affected Mexico. This created "illegal immigration" from a region that had never faced such restrictions.',
                        inquiryPrompt: 'How did a law meant to make immigration less racist actually create illegal immigration from Mexico and Latin America for the first time?',
                        sources: [
                            {
                                title: 'LBJ Presidential Library: 1965 Immigration Act',
                                url: 'https://www.lbjlibrary.org/news-and-press/media-kits/immigration-and-nationality-act',
                                type: 'Presidential Library (Audio & Text)'
                            }
                        ]
                    }
                ]
            },
            modern: {
                title: "Deportation since 1980",
                period: "1980–Present",
                thematicNote: "Overall trends include increased use of formal deportation proceedings with bars on re-entry; expanded reasons for deportation of noncitizens; more limited avenues for unauthorized immigrants to regularize their status; and legal limits on deportation (TPS, TVPRA) alongside tensions between targeting recent border crossers even as increasing numbers seek asylum. Policy workarounds include expanded expedited removal, collaboration with local law enforcement, targeting particular groups to create hostile environments, and pressuring other countries into accepting deportations.",
                entries: [
                    {
                        id: 'mod1',
                        year: '1980',
                        event: 'The Refugee Act: Provided a permanent and systematic procedure for the admission of refugees of special humanitarian concern to the US. Incorporated the UN Refugee Convention definition of a refugee into US law. Mandated the establishment of procedures whereby a person at the border or in the US, regardless of status, could seek asylum. Prohibited return of any asylum seeker to a country where their life or liberty would be threatened.',
                        annotation: 'This law created the modern US asylum system, bringing the US into compliance with the 1951 UN Refugee Convention. It separated refugee admissions from immigration quotas and established the principle of "non-refoulement"—not returning people to persecution.',
                        inquiryPrompt: 'What\'s the difference between a refugee (admitted abroad) and an asylum seeker (arrives first, applies later)? Why does the law treat them differently?',
                        sources: [
                            {
                                title: 'Refugee Act of 1980 (Full Text, PDF)',
                                url: 'https://www.govinfo.gov/content/pkg/STATUTE-94/pdf/STATUTE-94-Pg102.pdf',
                                type: 'Government Document'
                            },
                            {
                                title: 'UNHCR: 1951 Refugee Convention',
                                url: 'https://www.unhcr.org/1951-refugee-convention.html',
                                type: 'International Treaty'
                            }
                        ]
                    },
                    {
                        id: 'mod2',
                        year: '1980s',
                        event: 'Thousands of Central Americans fled to the US due to violence and poverty. US immigration officials refused to hear or summarily denied asylum claims from Salvadorans and Guatemalans, prompting the growth of the Sanctuary Movement and leading to a federal court settlement requiring new hearings for hundreds of thousands of asylum seekers. The US also pressured Mexico to block migrants before they reached the US border. As a result, Mexico deported more Central Americans than the US.',
                        annotation: 'The Reagan administration supported right-wing governments in El Salvador and Guatemala, leading to denial of asylum for those fleeing those regimes. The Sanctuary Movement involved churches providing refuge, leading to prosecutions. The 1990 settlement in ABC v. Thornburgh granted work permits and new asylum hearings.',
                        inquiryPrompt: 'Why would the U.S. deny asylum to people fleeing violence in countries the U.S. government supported? What role did politics play in asylum decisions?',
                        sources: [
                            {
                                title: 'The Sanctuary Movement',
                                url: 'https://www.calmigration.org/learn-chapter/sanctuary-movement',
                                type: 'Museum Essay'
                            }
                        ]
                    },
                    {
                        id: 'mod3',
                        year: '1986',
                        event: 'The Immigration Reform and Control Act (IRCA): Introduced border fortification and increased border enforcement to deter unauthorized migration. Instead of inhibiting migration, the policy changed behavior, as migrants, fearing the risks of crossing multiple times, brought their families and settled permanently. The overall unauthorized migrant population living in the United States increased. Granted a pathway to permanent residency to unauthorized immigrants who had lived in the US since 1982 or worked in certain agricultural jobs. Imposed sanctions on employers who knowingly hire unauthorized workers.',
                        annotation: 'IRCA legalized approximately 2.7 million people, the largest legalization in US history. But its enforcement provisions had "unintended consequences": militarizing the border made circular migration more dangerous, leading migrants to stay permanently and bring families rather than return to Mexico seasonally.',
                        inquiryPrompt: 'How did making the border more dangerous actually increase the number of people staying permanently in the U.S.?',
                        sources: [
                            {
                                title: 'At Its 25th Anniversary, IRCA\'s Legacy Lives On',
                                url: 'https://www.migrationpolicy.org/article/its-25th-anniversary-ircas-legacy-lives',
                                type: 'Policy Analysis'
                            }
                        ]
                    },
                    {
                        id: 'mod4',
                        year: '1990',
                        event: 'The Immigration Act: Revised the preference categories for immigration visas (including limiting visas for low-skilled workers) and created new diversity and specialty immigrant visas and temporary visas. Authorized the attorney general to grant "temporary protected status" to nationals of countries suffering from armed conflicts, natural disasters, or "other extraordinary and temporary conditions."',
                        annotation: 'This law created the H-1B visa for skilled workers, the diversity visa lottery, and Temporary Protected Status (TPS). TPS has been granted to nationals of countries facing war, environmental disaster, or other crises, allowing them to remain in the US temporarily.',
                        inquiryPrompt: 'Why would the U.S. create "temporary" protected status that has lasted decades for some countries? What makes protection temporary vs. permanent?',
                        sources: [
                            {
                                title: 'USCIS: Temporary Protected Status',
                                url: 'https://www.uscis.gov/humanitarian/temporary-protected-status',
                                type: 'USCIS Info'
                            }
                        ]
                    },
                    {
                        id: 'mod5',
                        year: '1996',
                        event: 'The Illegal Immigration Reform and Immigrant Responsibility Act of 1996 (IIRAIRA): Added penalties for immigrants who commit crimes in the United States or undocumented immigrants who stay in the US for statutorily defined periods of time. Created an expedited removal process, mandating detention and fast-track removal without immigration court proceedings.',
                        annotation: 'IIRAIRA dramatically expanded deportability, making even minor crimes grounds for deportation and eliminating many forms of relief. It created "expedited removal" allowing Border Patrol to deport without hearings, and bars on re-entry (3-10 years) for those who overstay. These provisions are still the backbone of current enforcement.',
                        inquiryPrompt: 'What does it mean to be deported without a hearing? How does this change the role of courts and due process in immigration enforcement?',
                        sources: [
                            {
                                title: 'Congressional Research Service: IIRAIRA Analysis',
                                url: 'https://crsreports.congress.gov/product/pdf/R/R43892',
                                type: 'CRS Report'
                            }
                        ]
                    },
                    {
                        id: 'mod6',
                        year: '2004–18',
                        event: 'Mexico deported 1.7 million Central Americans; the US deported 1.1 million Central Americans.',
                        annotation: 'The US externalized immigration enforcement to Mexico, providing funding and diplomatic pressure for Mexico to intercept Central American migrants before they reached the US border. This policy shift made migration more dangerous and pushed flows toward smuggling networks.',
                        inquiryPrompt: 'What does it mean to "externalize" border enforcement? How does having Mexico enforce U.S. immigration goals change migration patterns?',
                        sources: [
                            {
                                title: 'The "Wall" Before the Wall: Mexico's Crackdown on Migration at its Southern Border (WOLA Analysis, PDF)',
                                url: 'https://www.wola.org/wp-content/uploads/2019/12/2019-FULL-Report-Mexicos-Southern-Border.pdf',
                                type: 'Policy Analysis'
                            }
                        ]
                    },
                    {
                        id: 'mod7',
                        year: '2006',
                        event: 'The Secure Fences Act mandated that the Secretary of Homeland Security act quickly to achieve operational control over US international land and maritime borders, including an expansion of existing walls, fences, and surveillance.',
                        annotation: 'This law authorized approximately 700 miles of fencing along the US-Mexico border. Border wall construction became a central political issue, with debates over effectiveness, cost, environmental impact, and symbolism.',
                        inquiryPrompt: 'Did building 700 miles of fence reduce unauthorized border crossings, or did it just change where and how people crossed?',
                        sources: [
                            {
                                title: 'The Secure Fence Act of 2006 (George W. Bush Administration Fact Sheet)',
                                url: 'https://georgewbush-whitehouse.archives.gov/news/releases/2006/10/20061026-1.html',
                                type: 'Primary Source'
                            }
                        ]
                    },
                    {
                        id: 'mod8',
                        year: '2008',
                        event: 'The Trafficking Victims Protection Act created visas for victims of trafficking and special screenings for unaccompanied children. Unaccompanied children from noncontiguous territories are referred to the Office of Refugee Resettlement.',
                        annotation: 'The William Wilberforce TVPRA established special protections for children arriving at the border alone. Children from countries other than Mexico and Canada cannot be immediately deported—they must be transferred to ORR custody and given immigration hearings.',
                        inquiryPrompt: 'Why would the law treat unaccompanied children from Mexico differently from those from Guatemala or Honduras?',
                        sources: [
                            {
                                title: 'Congressional Research Service: Unaccompanied Alien Children',
                                url: 'https://crsreports.congress.gov/product/pdf/R/R43599',
                                type: 'CRS Report'
                            }
                        ]
                    },
                    {
                        id: 'mod9',
                        year: '2010',
                        event: 'Los Zetas cartel massacred 72 Central American migrants who were unable to pay the cartel. Cartel violence against Central American migrants has since escalated.',
                        annotation: 'The San Fernando massacre drew international attention to violence against migrants in Mexico. As border enforcement pushed migrants into more dangerous routes, they became vulnerable to cartel extortion, kidnapping, sexual violence, and murder. This violence became a basis for asylum claims.',
                        inquiryPrompt: 'How did U.S. border policies create conditions where cartels could prey on migrants? Who is responsible for migrant safety during the journey?',
                        sources: [
                            {
                                title: 'Mexico's San Fernando Massacres: A Declassified History',
                                url: 'https://nsarchive2.gwu.edu/NSAEBB/NSAEBB445/',
                                type: 'National Security Archival Material'
                            }
                        ]
                    },
                    {
                        id: 'mod10',
                        year: '2012',
                        event: 'The Deferred Action for Childhood Arrivals (DACA) executive action enabled young adults (ages 15 to 30) brought to the US illegally as children to apply for temporary deportation relief and a two-year work permit.',
                        annotation: 'DACA provided renewable two-year protection from deportation for approximately 700,000 young people. It was an executive action, not a law, making it vulnerable to policy changes. Recipients are often called "Dreamers" after the failed DREAM Act legislation.',
                        inquiryPrompt: 'Why is DACA more vulnerable to being ended than a law passed by Congress? What\'s the difference between executive action and legislation?',
                        sources: [
                            {
                                title: 'DHS Memo: Exercising Prosecutorial Discretion (2012)',
                                url: 'https://www.dhs.gov/xlibrary/assets/s1-exercising-prosecutorial-discretion-individuals-who-came-to-us-as-children.pdf',
                                type: 'DHS Document'
                            }
                        ]
                    },
                    {
                        id: 'mod11',
                        year: '2015',
                        event: 'Decision in Flores v. Johnson set detention conditions for families and limited it to 20 days.',
                        annotation: 'The Flores Settlement Agreement (originally from 1997, modified in 2015) established that children cannot be held in unlicensed facilities or detained longer than 20 days. This created tensions with family detention policies and "catch and release" debates.',
                        inquiryPrompt: 'What happens when a family\'s asylum case takes longer than 20 days to decide? How does the Flores rule affect enforcement policy?',
                        sources: [
                            {
                                title: 'The Flores Settlement and Family Incarceration: A Brief History and Next Steps',
                                url: 'https://humanrightsfirst.org/wp-content/uploads/2020/10/FLORES_SETTLEMENT_AGREEMENT-1.pdf',
                                type: 'Fact Sheet'
                            }
                        ]
                    },
                    {
                        id: 'mod12',
                        year: '2020',
                        event: 'Section 265 of US Code Title 42 was invoked to prohibit entry and authorize expulsion of border crossers in the name of preventing the spread of COVID-19.',
                        annotation: 'Title 42 allowed immediate expulsion without asylum hearings, justified as a public health measure. It was used over 2 million times and remained in effect until May 2023. Critics argued it circumvented asylum law under the guise of public health.',
                        inquiryPrompt: 'Can public health emergencies override the right to seek asylum? Where should the line be between public health and refugee protection?',
                        sources: [
                            {
                                title: 'Congressional Research Service: Title 42 Expulsions',
                                url: 'https://crsreports.congress.gov/product/pdf/R/R46994',
                                type: 'CRS Report'
                            }
                        ]
                    }
                ]
            }
        };

        // SVG Icons
        const icons = {
            chevronDown: '<svg class="toggle-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>',
            chevronUp: '<svg class="toggle-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg>',
            externalLink: '<svg class="external-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg>',
            book: '<svg class="sources-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg>'
        };

        let expandedEntries = new Set();
        let activeSection = 'all';

        // Render functions
        function renderSources(sources) {
            if (!sources || sources.length === 0) return '';
            
            const sourceItems = sources.map(source => `
                <a href="${source.url}" target="_blank" rel="noopener noreferrer" class="source-link">
                    ${icons.externalLink}
                    <span class="source-title">
                        ${source.title}
                        <span class="source-type">(${source.type})</span>
                    </span>
                </a>
            `).join('');
            
            return `
                <div class="sources">
                    <div class="sources-header">
                        ${icons.book}
                        <span class="sources-title">Primary Sources & Resources</span>
                    </div>
                    <div class="source-list">
                        ${sourceItems}
                    </div>
                </div>
            `;
        }

        function renderEntry(entry) {
            const isExpanded = expandedEntries.has(entry.id);
            const toggleIcon = isExpanded ? icons.chevronUp : icons.chevronDown;
            const ariaExpanded = isExpanded ? 'true' : 'false';
            
            return `
                <div class="entry">
                    <div class="entry-card">
                        <div class="entry-header">
                            <span class="entry-year">${entry.year}</span>
                            <button class="toggle-btn" 
                                    data-entry-id="${entry.id}" 
                                    aria-expanded="${ariaExpanded}"
                                    aria-controls="details-${entry.id}">
                                <span>${isExpanded ? 'Hide' : 'View'} Context</span>
                                ${toggleIcon}
                            </button>
                        </div>
                        <p class="entry-event">${entry.event}</p>
                        <div id="details-${entry.id}" class="entry-details ${isExpanded ? 'visible' : ''}">
                            ${entry.annotation ? `
                                <div class="annotation">
                                    <p>${entry.annotation}</p>
                                </div>
                            ` : ''}
                            ${entry.inquiryPrompt ? `
                                <div class="inquiry">
                                    <div class="inquiry-label">Think About This</div>
                                    <p>${entry.inquiryPrompt}</p>
                                </div>
                            ` : ''}
                            ${renderSources(entry.sources)}
                        </div>
                    </div>
                </div>
            `;
        }

        function renderSection(sectionKey, data) {
            if (activeSection !== 'all' && activeSection !== sectionKey) return '';
            
            const entries = data.entries.map(renderEntry).join('');
            
            return `
                <div class="timeline-section" data-section="${sectionKey}">
                    <div class="section-header">
                        <h2>${data.title}</h2>
                        <div class="section-period">${data.period}</div>
                        <p class="section-note">${data.thematicNote}</p>
                    </div>
                    ${entries}
                </div>
            `;
        }

        function renderTimeline() {
            const content = document.getElementById('timeline-content');
            content.innerHTML = `
                ${renderSection('foundations', timelineData.foundations)}
                ${renderSection('midcentury', timelineData.midcentury)}
                ${renderSection('modern', timelineData.modern)}
            `;
            
            // Attach event listeners to toggle buttons
            document.querySelectorAll('.toggle-btn').forEach(btn => {
                btn.addEventListener('click', handleToggle);
            });
            
            // Add staggered animation delays to entries (only if not printing)
            if (typeof window.matchMedia !== 'undefined' && !window.matchMedia('print').matches) {
                const entries = document.querySelectorAll('.entry-card');
                entries.forEach((entry, index) => {
                    entry.style.animationDelay = `${index * 0.05}s`;
                });
            }
        }

        function handleToggle(e) {
            const button = e.currentTarget;
            const entryId = button.dataset.entryId;
            
            if (expandedEntries.has(entryId)) {
                expandedEntries.delete(entryId);
                button.setAttribute('aria-expanded', 'false');
            } else {
                expandedEntries.add(entryId);
                button.setAttribute('aria-expanded', 'true');
            }
            
            renderTimeline();
        }

        function handleFilterClick(e) {
            if (!e.target.classList.contains('filter-btn')) return;
            
            // Update active filter
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            e.target.classList.add('active');
            
            activeSection = e.target.dataset.section;
            renderTimeline();
        }

        // localStorage Autosave Function
        function setupAutosave() {
            const inputs = document.querySelectorAll('textarea');
            const saveStatus = document.getElementById('saveStatus');
            
            // Load saved data on page load
            inputs.forEach((input) => {
                const savedValue = localStorage.getItem(`dt_${input.id}`);
                if (savedValue) {
                    input.value = savedValue;
                }
                
                // Save on input (debounced)
                let saveTimeout;
                input.addEventListener('input', () => {
                    clearTimeout(saveTimeout);
                    saveTimeout = setTimeout(() => {
                        localStorage.setItem(`dt_${input.id}`, input.value);
                        
                        // Visual feedback
                        if (saveStatus) {
                            saveStatus.textContent = '✓ Auto-saved';
                            setTimeout(() => {
                                saveStatus.textContent = '';
                            }, 2000);
                        }
                    }, 500);
                });
            });
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            renderTimeline();
            setupAutosave(); // Enable localStorage autosave
            
            // Attach filter event listeners
            document.querySelector('.filters').addEventListener('click', handleFilterClick);
        });
    </script>
</body>
</html>
